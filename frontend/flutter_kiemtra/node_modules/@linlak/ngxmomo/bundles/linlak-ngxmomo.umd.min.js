!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs")):"function"==typeof define&&define.amd?define("@linlak/ngxmomo",["exports","@angular/core","@angular/common/http","rxjs"],e):e(((t=t||self).linlak=t.linlak||{},t.linlak.ngxmomo={}),t.ng.core,t.ng.common.http,t.rxjs)}(this,(function(t,e,n,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var i=function(){function t(){}return t.prototype.loadScript=function(t,e){if(!document.getElementById(t.name)){var n=document.createElement("script");n.async=!1,n.src=t.url,n.onload=e,document.head.appendChild(n)}},t.prototype.notify=function(t){this.eventCallback({provider:this.TYPE,event:{type:t.type,details:t.detail}})},t}();var a=function(){this.currency="EUR",this.environ="sandbox"};var c=function(t){function e(e){var n=t.call(this)||this;return n.TYPE="mtnmomowidget",n.momoProviderObj=new a,n.momoConfig=e,n.momoProviderObj.name="mtnmomowidget",n.momoProviderObj.url=e.url||"https://widget.northeurope.cloudapp.azure.com:9443/v0.1.0/mobile-money-widget-mtn.js",n}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.initialize=function(t){var e=this;return new Promise((function(n,o){e.loadScript(e.momoProviderObj,(function(){e.eventCallback=t,window.addEventListener("mobile-money-qr-payment-created",(function(t){return e.notify(t)})),window.addEventListener("mobile-money-qr-payment-canceled",(function(t){return e.notify(t)})),window.addEventListener("mobile-money-qr-payment-successful",(function(t){return e.notify(t)})),window.addEventListener("mobile-money-qr-payment-failed",(function(t){return e.notify(t)})),mobileMoneyReinitializeWidgets(),n()}))}))},e.prototype.getApiUser=function(){return this.momoConfig.apiUserId},e.prototype.getCurrency=function(){return this.momoConfig.currency},e.PROVIDER_TYPE="mtnmomowidget",e}(i);var d=function(){function t(t){if(this.providers=new Map,t)for(var e=0;e<t.length;e++){var n=t[e];this.providers.set(n.provider.TYPE,n.provider)}}return t.prototype.getProviders=function(){return this.providers},t.prototype.addProvider=function(t){this.providers.get(t.TYPE)||this.providers.set(t.TYPE,t)},t.prototype.addMomoWidgetProvider=function(t){return this.addProvider(new c(t)),this},t}();var u=function(){function t(t,e){var n=this;this.http=e,this.eventListener=new o.BehaviorSubject(!1),this.providers=t.getProviders(),this.providers.forEach((function(t,e){t.initialize(n.eventCallback.bind(n)).then((function(t){})).catch((function(t){}))}))}return t.prototype.listen=function(){return this.eventListener.asObservable()},t.prototype.eventCallback=function(t){this.notifyEvt(t)},t.prototype.getProvider=function(t){return this.providers.get(t)},t.prototype.notifyEvt=function(t){this.eventListener.next(t)},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:d},{type:n.HttpClient}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(d),e.ɵɵinject(n.HttpClient))},token:t,providedIn:"root"}),t}();var s=function(){function t(t){if(this.momo=t,this.momoProvider=this.momo.getProvider("mtnmomowidget"),!(this.momoProvider||this.momoProvider instanceof c))throw new Error(c.PROVIDER_TYPE+" was not initialized");this.apiUserId=this.momoProvider.getApiUser(),this.currency=this.momoProvider.getCurrency()}return t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){},t.decorators=[{type:e.Component,args:[{selector:"momo-qrpayment",template:'\n        <div>\n            <div\n                class="mobile-money-qr-payment"\n                [attr.data-api-user-id]="apiUserId"\n                [attr.data-amount]="amount"\n                [attr.data-currency]="currency"\n                [attr.data-external-id]="externalId"\n            >\n            </div>\n        </div>\n    '}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={externalId:[{type:e.Input}],amount:[{type:e.Input}]},t}();var p=function(){function t(e){e&&(t.alreadCalled=!0)}return t.forRoot=function(e){if(!t.alreadCalled)return{ngModule:t,providers:[u,{provide:d,useValue:e}]}},t.alreadCalled=!1,t.decorators=[{type:e.NgModule,args:[{declarations:[s],imports:[],exports:[s]}]}],t.ctorParameters=function(){return[{type:t,decorators:[{type:e.Optional},{type:e.SkipSelf}]}]},t}();t.NgxMomoModule=p,t.NgxMomoService=u,t.NgxMomoServiceConfig=d,t.ɵa=d,t.ɵb=s,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=linlak-ngxmomo.umd.min.js.map